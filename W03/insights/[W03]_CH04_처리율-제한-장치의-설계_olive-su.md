## API 게이트웨이

> MSA(마이크로 서비스 아키텍쳐, 이하 MSA)와 함께 근래에 떠오르고 있는것이 API 게이트 웨이이다. API 게이트웨이는 API서버 앞단에서 모든 API 서버들의 엔드포인트를 단일화하여 묶어주고 API에 대한 인증과 인가 기능에서 부터 메세지에 따라서 여러 서버로 라우팅 하는 고급기능 까지 많은 기능을 담당할 수 있다.

<br/>

## throttle

> 스로틀링(Throttling): PC, 노트북, 모바일 기기의 CPU, GPU 등이 지나치게 과열될때 기기의 손상을 막고자 클럭과 전압을 강제적으로 낮추거나 강제로 전원을 꺼서 발열을 줄이는 기능

<br/>

## Lock 사용시 왜 성능이 저하되는가?

- LOCK 사용하면 여러 트랜잭션들이 순차적으로 실행
- ⇢ 동시성이 낮아짐

<br/>

### Lock 에 의한 성능 저하를 최소화하는 방안

- 트랜잭션의 원자성을 훼손하지 않는 선에서 트랜잭션을 가능한 짧게 정의
- 같은 데이터를 갱신하는 트랜잭션이 동시에 수행되지 않도록 설계
  - e.g. 트랜잭션이 활발한 주간에 대용량 갱신 작업을 수행 X
- 블로킹 현상에 의해 사용자가 무한정 기다리지 않도록 적절한 프로그래밍 기법을 도입
  - e.g. Lock에 의한 대기 시간이 최대 2초를 넘지 않도록 설정

<br/>

---

# Comment

> (p. 55)
> _여러분의 설계가 마이크로서비스에 기반하고 있고, 사용자 인증이나 IP 허용목록 관리 등을 처리하기 위해 API 게이트웨이를 이미 설계에 포함시켰다면 처리율 제한 기능 또한 게이트웨이에 포함시켜야 할 수도 있다._

- 이미 사용중인 리소스가 있다면 해당 기술을 설계에 포함하여 설계할 수 있다.
  - 기술 자체에 매몰되기 보다, ✨필요✨에 의해 도입해야함
  - '결국은 기술을 왜 썼는가'로 귀결됨

<br/>

---

# Reference

- [MSA 아키텍쳐 구현을 위한 API 게이트웨이의 이해 (API GATEWAY)](https://bcho.tistory.com/1005)
- [스로틀링(Throttling)이란?](https://12bme.tistory.com/504)
- [Lock – DATA ON-AIR](https://dataonair.or.kr/db-tech-reference/d-guide/sql/?mod=document&uid=361)
