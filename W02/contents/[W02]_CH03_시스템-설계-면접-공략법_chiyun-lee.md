# 3장. 시스템 설계 면접 공략법

### 4가지 설계 원칙

1. **문제 이해 및 설계 범위 확정**
    
    빠르게 답을 내는 것보다, 그런 답을 내게된 이유가 중요하다. (정해진 답이 없는 경우가 많음)
    
    - 구체적으로 어떤 기능들이 필요한가?
    - 제품 사용자 수는?
    - 회사 규모의 성장성, 속도는?
    - 주로 사용하는 기술 스택
    - 기존 서비스들은 어떤 설계를 활용하는가?

1. **개략적인 설계안 제시 및 동의 구하기**
    - 면접관에게 질문하는 것을 두려워 하지 마라 (면접은 대화하는 자리)
    - 핵심 컴포넌트를 포함하는 다이어그램을 그려라 (클라이언트(웹/모바일), API, 웹 서버, 데이터 저장소, 캐시, CDN, 메시지 큐, …)
    - 제약 사항을 만족하는지 대략적으로 계산하자
    
2. **상세 설계**
    
    상세 설계에서는 우선 순위를 정하는 것이 중요하다. 똑같은 구조에 대해서도 기업 마다 우선적으로 생각하는 것, 제약 사항이 다를 수 있기에 면접관과 상의하며 상세 설계를 작성한다.
    

- 시스템 전반적으로 달성해야 할 목표와 기능 범위 확인
- 전체 설계의 개략적 청사진(미래 계획) 마련
- 계획에 대한 면접 관의 의견 청취
- 상세 설계에서 집중해야 할 영역 확인

1. **마무리**
    
    다시 한 번 설계를 요약해보며 잘못된 부분을 교차 검증해보자.
    
    완벽한 설계란 없으니 발생할 수 있는 문제점을 찾아보고 어떻게 해결할 것인지 생각하자.
    
    - 병목 구간, 개선 가능한 지점을 찾아보자
    - 미래에 닥칠 규모 확장, 다른 제안에 어떻게 대응할 것인지 생각해보자
    - 운영 이슈에 관한 논의도 가치가 있다.
        - 메트릭은 어떻게 수집하고 모니터링 할 것인가?
        - 로그는?
        - 어떻게 배포해 나갈 것인가?

### **※ 메트릭**

시스템의 동작과 성능을 정량적으로 측정하고 분석하는 데 사용되는 중요한 지표

1. **메트릭의 종류**
    - 성능 메트릭: 응답 시간, 처리량(throughput), 지연 시간(latency) 등 시스템의 성능과 관련된 측정값
    - 사용량 메트릭: 동시 사용자 수, API 호출 횟수, 데이터베이스 쿼리 수 등 시스템 사용량을 나타내는 지표
    - 에러 메트릭: 에러 발생 횟수, 에러율 등 시스템의 안정성과 관련된 측정값
    - 리소스 메트릭: CPU 사용률, 메모리 사용량, 네트워크 대역폭 등 시스템이 사용하는 자원에 대한 측정값
    - 비즈니스 메트릭: 사용자 행동 분석, 매출, 전환율 등 비즈니스 목표와 관련된 측정값
    
2. **메트릭 수집 방법**
    - 로그 분석: 애플리케이션 로그, 액세스 로그 등을 분석하여 메트릭을 추출
    - 에이전트 기반 모니터링: 서버에 모니터링 에이전트를 설치하여 시스템 메트릭을 수집
    - 애플리케이션 성능 모니터링(APM): 애플리케이션 코드에 추적 코드를 삽입하여 성능 데이터를 수집
    - 네트워크 모니터링: 네트워크 트래픽을 모니터링하여 대역폭, 지연 시간 등의 메트릭을 수집
    
3. **메트릭 시각화 및 대시보드**
    - 시계열 그래프: 시간에 따른 메트릭 변화를 시각화하여 추세와 패턴을 파악
    - 히트맵: 다차원 데이터를 색상으로 표현하여 전체적인 분포와 상관관계를 파악
    - 게이지와 숫자: 현재 값과 임계치를 한 눈에 볼 수 있는 시각화 방법
    - 대시보드: 여러 메트릭을 한 화면에 모아 실시간으로 모니터링할 수 있는 툴
    
4. **메트릭 기반 알림 및 자동화**
    - 임계치 기반 알림: 특정 메트릭이 미리 정의한 임계값을 초과하면 알림을 발송
    - 이상 탐지: 메트릭의 정상 범위를 벗어나는 이상 징후를 자동으로 감지하고 대응
    - 오토스케일링: 메트릭을 기반으로 시스템 리소스를 자동으로 조정하여 최적의 성능과 비용 효율성 달성
    
5. **메트릭 기반 의사결정 및 최적화**
    - 용량 계획: 메트릭을 분석하여 미래의 트래픽 증가에 대비한 인프라 용량을 예측하고 계획
    - 성능 최적화: 병목 지점과 비효율적인 부분을 파악하여 시스템 성능을 개선
    - 비용 최적화: 리소스 사용량 메트릭을 분석하여 불필요한 지출을 줄이고 비용 효율성을 높임